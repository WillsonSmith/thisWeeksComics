module.exports.getThisWeek=function(e){function t(){var e=a.date,t=e.getFullYear(),o=e.getMonth()+1,n=e.getDay(),r=e.getDate(),s=r-n,i=s+7,u;return u=t+"-"+o+"-"+s+","+t+"-"+o+"-"+i}var a=require("./required.js").require,o=a.http,n=require("crypto"),r=n.createHash("md5"),s=a.pubKey,i=a.privKey,u=a.date.getTime(),c=a.moment,d="&ts="+u+"&apikey="+s+"&hash="+r.update(u+i+s).digest("hex"),f,g="";!function(){f={host:"gateway.marvel.com",path:"/v1/public/comics?dateRange="+t()+"&limit=100	"+d},console.log(f.host+f.path),o.request(f,function(t){t.setEncoding("utf8"),t.on("data",function(e){g+=e}),t.on("error",function(e){console.log("err",e.message)}),t.on("end",function(){g=JSON.parse(g),g.data.results.forEach(function(e){e.dates.forEach(function(t){var a={type:"sale",date:""};"onsaleDate"===t.type&&(t.date=c(t.date).format("D MMM YYYY"),a.date=t.date,e.dates=a)})}),e.json(g)})}).end()}()};