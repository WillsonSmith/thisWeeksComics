module.exports.getThisWeek=function(e){function t(){var e=u,t=e.getFullYear(),a=e.getMonth()+1,n=e.getDay(),o=e.getDate(),r=o-n,i=r+7,s;return s=t+"-"+a+"-"+r+","+t+"-"+a+"-"+i}var a=require("http"),n=require("crypto"),o=n.createHash("md5"),r=require("moment"),i=require("./api.js").pubKey,s=require("./api.js").privKey,u=new Date,c=u.getTime(),d="&ts="+c+"&apikey="+i+"&hash="+o.update(c+s+i).digest("hex"),p,f="";!function(){p={host:"gateway.marvel.com",path:"/v1/public/comics?dateRange="+t()+"&limit=100	"+d},console.log(p.host+p.path),a.request(p,function(t){t.setEncoding("utf8"),t.on("data",function(e){f+=e}),t.on("error",function(e){console.log("err",e.message)}),t.on("end",function(){f=JSON.parse(f),f.data.results.forEach(function(e){e.dates.forEach(function(t){var a={type:"sale",date:""};"onsaleDate"===t.type&&(t.date=r(t.date).format("D MMM YYYY"),a.date=t.date,e.dates=a)})}),e.json(f)})}).end()}()};